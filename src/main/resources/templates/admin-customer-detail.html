<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Customer Detail</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 min-h-screen min-h-dvh">
    <div th:replace="~{fragments/nav :: nav(${true})}"></div>
    <div class="container mx-auto px-4 flex items-center justify-center min-h-[80vh]">
        <div class="bg-white shadow-md rounded-lg p-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Customer Detail</h1>
            
            <div class="space-y-4">
                <div class="border-b border-gray-200 pb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <p class="text-gray-900 text-lg" th:text="${customer.email}">email</p>
                </div>
                
                <div class="border-b border-gray-200 pb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                    <p class="text-gray-900 text-lg" th:text="${customer.name}">name</p>
                </div>
                
                <div class="border-b border-gray-200 pb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Registration Date</label>
                    <p class="text-gray-900 text-lg" th:text="${customer.registrationDate}">registration date</p>
                </div>
                
                <div class="border-b border-gray-200 pb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Birth Date</label>
                    <p class="text-gray-900 text-lg" th:text="${customer.birthDate}">birth date</p>
                </div>
                
                <div class="border-b border-gray-200 pb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                    <p class="text-gray-900 text-lg" th:text="${customer.phoneNumber}">phone number</p>
                </div>
                
                <div class="border-b border-gray-200 pb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                    <p class="text-gray-900 text-lg" th:text="${customer.address}">address</p>
                </div>
                
                <div class="border-b border-gray-200 pb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Role</label>
                    <p class="text-gray-900 text-lg" th:text="${customer.role}">role</p>
                </div>
                
                <!-- Admin Operations -->
                <div class="border-t border-gray-300 pt-4">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Admin Operations</h2>
                    <div class="grid grid-cols-2 gap-3">
                        <a th:href="@{/admin/customers/{email}/edit-input(email=${customer.email})}" 
                           class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 text-center">Edit</a>
                        <a th:href="@{/admin/customers/{email}/delete-confirm(email=${customer.email})}" 
                           class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 text-center">Delete</a>
                        
                        <!-- Lock/Unlock Button (conditional) -->
                        <div th:if="${isLocked}">
                            <form th:action="@{/admin/customers/{email}/unlock(email=${customer.email})}" method="post">
                                <button type="submit" class="w-full bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Unlock Account</button>
                            </form>
                        </div>
                        <div th:unless="${isLocked}">
                            <form th:action="@{/admin/customers/{email}/lock(email=${customer.email})}" method="post">
                                <button type="submit" class="w-full bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">Lock Account</button>
                            </form>
                        </div>
                        
                        <form th:action="@{/admin/customers/{email}/password-reset(email=${customer.email})}" method="post">
                            <button type="submit" class="w-full bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">Send Reset Link</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-center mt-8">
                <a th:href="@{/admin/customers}" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Back to List</a>
            </div>
        </div>
    </div>
</body>
</html>
